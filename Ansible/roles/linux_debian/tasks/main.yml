---
# Debian/Ubuntu-specific hardening and setup

- name: Gather facts
  tags: always
  setup:

# --- Package Updates ---
- name: Update and upgrade packages
  tags: [setup, packages]
  include_tasks: apt_update.yml

# --- Install Essential Packages ---
- name: Install essential packages
  tags: [setup, packages]
  include_tasks: install_packages.yml

# --- Firewall (UFW) ---
- name: Configure UFW firewall
  tags: [hardening, firewall]
  include_tasks: firewall_ufw.yml

# --- Docker Install (optional) ---
- name: Install Docker
  tags: [setup, docker]
  include_tasks: install_docker.yml
  when: install_docker | default(false)
