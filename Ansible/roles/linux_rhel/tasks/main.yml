---
# RHEL/Rocky/CentOS-specific hardening and setup

- name: Gather facts
  tags: always
  setup:

# --- Package Updates ---
- name: Update packages
  tags: [setup, packages]
  include_tasks: yum_update.yml

# --- Install Essential Packages ---
- name: Install essential packages
  tags: [setup, packages]
  include_tasks: install_packages.yml

# --- Firewall (firewalld) ---
- name: Configure firewalld
  tags: [hardening, firewall]
  include_tasks: firewall_firewalld.yml

# --- Docker Install (optional) ---
- name: Install Docker
  tags: [setup, docker]
  include_tasks: install_docker.yml
  when: install_docker | default(false)
